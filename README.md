# ABRAM
_Astronomical Bodies RAdiometric Model_

This tool allows to render celestial objects of several shapes and orientations considering any camera pointing and orientation or sun direction. Being based on radiometric equations it is mathematically exact and photometrically consistent.

A rendering of the view of Mars from 74.5k km using the ISRU Mars Color Camera is shown compared against a real image (rotated and zoomed out).

![image](https://github.com/andrepiz/abram/assets/75851004/48c234f2-d62c-4ead-8f16-754000403ad5)

Several BRDFs are implemented and the user can mix them to find the more realistic model depending on the body considered. 

Lambert (left), Lommel-Seeliger (center) and Oren-Mayar (right) reflection models are shown applied to a simple no-textured sphere in the following pictures: 

![image](https://github.com/andrepiz/abram/assets/75851004/05ca828f-6a2a-431c-b16e-98564dd6eefc)

Finally, the tool can be used to calibrate radiometrically rendering software such as Blender or Unreal Engine. A comparison of the Moon rendered with Blender (left) against an image generated by ABRAM (right) is shown in the following picture. Note that the solar strength has been radiometrically calibrated in Blender such to maintain the same exposure time of the analytical model, therefore performing a radiometric calibration of Blender.

![image](https://github.com/andrepiz/abram/assets/75851004/f3ecb086-d8ca-4f3c-bb7f-40af87392a35)

The tool is based on the radiometric equations of reflection of light from a sphere, integrated across discretized surface sectors, to deliver a point cloud of PL coefficients, i.e. reflected Power (P) over emitted Radiance (L). 

![image](https://github.com/andrepiz/abram/assets/75851004/9caef538-c6c8-4f55-bff6-2b5087c96804)

These coefficients are then projected onto the camera matrix and binned to form a 2D quantized matrix. 

![image](https://github.com/andrepiz/abram/assets/75851004/1bb7dbc9-2e76-4989-ac5b-32340c232bad)

The power at each pixel is then obtained multiplying PL for the radiance emitted by the star integrated across the desired wavelengths. Following the same approach, the Photon Count Rate (PCR), the Electron Count Rate (ECR) and the Electron Count (EC) can be obtained considering the Transmittivity (T), the Quantum Efficiency (QE) and the exposure time (tExp) of the camera. Finally, the rendered image is obtained from the EC multiplying for the Analog-to-Digital (AD) gain.

[1] Lester, Timothy P., MARSHALL L. McCall, and J. B. Tatum. "Theory of planetary photometry." Journal of the Royal Astronomical Society of Canada.

[2] https://www.universetoday.com/wp-content/uploads/2014/09/mars4-551x580.jpg
